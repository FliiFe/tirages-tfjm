<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width">
        <title>Page organisateurs</title>
        <style>
.form {
    text-align: center
}
        </style>
    </head>
    <body>
        <form action="/orga/submit" method="post" accept-charset="utf-8" class="form">
            <label for="teams">Trigrammes des équipes, séparés par des virgules:</label>
            <input type="text" name="teams" id="teams" value="" title="Équipes au format AAA,BBB,CCC,...,GGG" pattern="([A-Z]{3}|([A-Z]{3},)+([A-Z]{3}))"/> <br>
            <label for="pb">Nombre de problèmes:</label>
            <input type="number" name="pb" id="pb" value="" /><br>
            <label for="poules">Configuration des poules:</label>
            <input type="text" name="poules" id="poules" value="" title="Poules au format 4,3,3" pattern="(([345])|([345],)+([345]))"/><br>
            <input type="submit" value="Modifier et redémarrer le tirage" />
        </form>

        <script charset="utf-8">
            // Moche ! Mais tant pis, j'ai pas le temps ahah
            const teams = document.getElementById('teams')
            const pb = document.getElementById('pb')
            const poules = document.getElementById('poules')
            fetch('/orga/data.json').then(r => r.json()).then(data => {
                teams.value = data.teams.join(',')
                pb.value = data.problemes
                poules.value = data.poulesConfig.join(',')
            }).catch(err => alert('Une erreur est survenue.'))
        </script>
    </body>
</html>
